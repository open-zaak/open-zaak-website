{
    "componentChunkName": "component---src-templates-default-js",
    "path": "/news/2021-04-16-codecov-security-update/",
    "result": {"data":{"markdownRemark":{"frontmatter":{"title":"Codecov security update: geen impact op Open Zaak"},"html":"<h2>Codecov security update: geen impact op Open Zaak</h2>\n<p>Op 15 april werden we door Codecov geïnformeerd over een security incident met mogelijke impact op Open Zaak repositories.\nWe hebben onze repositories gecontroleerd en vastgesteld dat alles naar verwachting is.</p>\n<p>Tenzij je gebruik maakt van de <code class=\"language-text\">latest</code> image tag van de Open Zaak of Open Notificaties Docker Hub images, <strong>hoef je niets te doen</strong>.\nAls je <em>wel</em> gebruik maakt van de <code class=\"language-text\">latest</code> tag in deze image(s), dan adviseren we om voor de zekerheid de images opnieuw te pullen\nvan Docker Hub. Er is geen indicatie dat er malafide code in deze images terechtgekomen is, maar we kunnen dit niet garanderen\ndoor de manier waarop Docker Hub werkt.</p>\n<p>Hieronder kan je in detail nalezen wat er fout ging bij Codecov en hoe het mogelijks impact had op Open Zaak projecten. Tevens\nhebben we gedocumenteerd hoe we geverifieerd hebben dat er geen problemen zijn voor ons.</p>\n<h3>Codecov's security incident</h3>\n<p>Codecov is een tool die in Open Zaak, Open Notificaties en de CMIS adapter gebruikt wordt om code-coverage statistieken bij te houden\nen visualiseren. Tijdens het automatisch testen van deze codebases worden statistieken verzameld die bijhouden welke lijnen code\nuitgevoerd werden, deels uitgevoerd worden of niet uitgevoerd werden. Door dit te delen door het totale aantal lijnen code in de codebase\nkan je een dekkingspercentage berekenen.</p>\n<p>Het verzamelen van deze statistieken is een onderdeel van onze automatische\n<a href=\"https://github.com/open-zaak/open-zaak/blob/main/.github/workflows/ci.yml\">Continuous Integration</a> pipeline\nop Github. De ruwe statistieken worden naar Codecov toegestuurd met hun Github Action. Deze gebruikt op zijn\nbeurt weer de \"global bash uploader\" die op Codecov's website gehost is.</p>\n<p>Het is dit bash script die door een ongeautoriseerde derde partij gewijzigd is en actief gebruikt werd\nom acess tokens van Github Action workflows te exfiltreren naar third-party servers. Voor meer details kun\nje de <a href=\"https://about.codecov.io/security-update/\">statement</a> van Codecov lezen.</p>\n<p>Deze extractie was mogelijk van begin Januari 2021 tot April 2021.</p>\n<h3>Impact on the Open Zaak projects</h3>\n<p>We gebruiken Codecov in vier projecten:</p>\n<ul>\n<li>Open Zaak</li>\n<li>Open Notificaties</li>\n<li>CMIS adapter</li>\n<li>vng-selectielijst</li>\n</ul>\n<p>De Open Zaak, Open Notificaties en VNG-Selectielijst projecten publiceren automatisch container images naar Docker Hub.\nDit gebeurt als een build slaagt op de main branch of een getagde release. CMIS adapter is automatisch gepubliceerd\nnaar de <a href=\"http://pypi.org/\">Python Packaging index</a> voor getagde releases.</p>\n<p>Om dit mogelijk te maken zijn er credentials beschikbaar in de Github Workflow context, in de vorm van\norganisatie en/of repository secrets. De aangepaste Codecov bash uploader was in staat om deze credentials\nte exfiltreren buiten de workflow scope.</p>\n<p>De impact is hieronder per project samengevat.</p>\n<p><strong>Open Zaak</strong></p>\n<p>Open Zaak maakt gebruik van de Github Action, en was hier dus mogelijk door beïnvloed. Echter, we weten dat tijdens een CI run\nde code uitgelezen wordt van de repository, en dus vertrouwde code is. Op basis van deze code wordt een Docker image geproduceerd.\nDeze images hebben een sha256 checksum. De checksums die dus in de Github Workflow logs terug te zien zijn, zijn vertrouwde checksums.</p>\n<p><em>Als</em> een aanvaller met de gestolen tokens de image tag zou overschrijven, dan gebeurt dit nadat de build afgelopen is, en de resulterende\nimage zou dan een andere checksum hebben.</p>\n<p>We hebben de checksums gecontroleerd voor releases tussen 1 Januari en 1 April 2021:</p>\n<ul>\n<li>\n<p><a href=\"https://github.com/open-zaak/open-zaak/runs/1838882241?check_suite_focus=true\">1.3.4</a></p>\n<p>Uit CI kwam de <code class=\"language-text\">fe10bb4f402119d4b4073388bd60cacca4cea3964ad2c95c4f3507bdb6c377ad</code> checksum,\nen op <a href=\"https://hub.docker.com/layers/openzaak/open-zaak/1.3.4/images/sha256-fe10bb4f402119d4b4073388bd60cacca4cea3964ad2c95c4f3507bdb6c377ad?context=repo\">Docker Hub</a> vinden we\ndezelfde checksum.</p>\n</li>\n<li>\n<p><a href=\"https://github.com/open-zaak/open-zaak/runs/2194702452?check_suite_focus=true\">1.3.5</a></p>\n<p>Uit CI kwam de <code class=\"language-text\">f83a8e33eb6572e196721914a999fff3eca1ef9b742499fbdebe91780491d87c</code> checksum,\nen op <a href=\"https://hub.docker.com/layers/openzaak/open-zaak/1.3.5/images/sha256-f83a8e33eb6572e196721914a999fff3eca1ef9b742499fbdebe91780491d87c?context=repo\">Docker Hub</a> vinden we\ndezelfde checksum.</p>\n</li>\n</ul>\n<p>De gebruikers van de <code class=\"language-text\">latest</code> image tag kunnen dit manueel verifiëren door builds te controleren\nop de <code class=\"language-text\">master</code> (verleden) en de <code class=\"language-text\">main</code> branches - deze mappen op de <code class=\"language-text\">latest</code> docker image tag. De\nCI run logs zijn terug te vinden op <a href=\"https://github.com/open-zaak/open-zaak/actions?query=branch%3Amain\">Github</a>.\nMerk op dat CI logs die ouder zijn dan drie maanden niet meer beschikbaar zijn - daarom raden we aan om de\n<code class=\"language-text\">latest</code> tag voor de zekerheid opnieuw te pullen.</p>\n<p><strong>Open Notificaties</strong></p>\n<p>De situatie voor Open Notificaties is vergelijkbaar met Open Zaak hierboven.</p>\n<p>De relevante releases zijn:</p>\n<ul>\n<li>\n<p><a href=\"https://github.com/open-zaak/open-notificaties/runs/2131685805?check_suite_focus=true\">1.1.3</a></p>\n<p>Uit CI kwam de <code class=\"language-text\">47d001e89b904a1d4450b0d165c072289ba34ee95c7ff41e28b8440c9689a83b</code>\nchecksum, en op <a href=\"https://hub.docker.com/layers/openzaak/open-notificaties/1.1.3/images/sha256-47d001e89b904a1d4450b0d165c072289ba34ee95c7ff41e28b8440c9689a83b?context=repo\">Docker Hub</a>\nvinden we dezelfde checksum.</p>\n</li>\n<li>\n<p><a href=\"https://github.com/open-zaak/open-notificaties/runs/2194513677?check_suite_focus=true\">1.1.4</a></p>\n<p>Uit CI kwam de <code class=\"language-text\">2532abe52a37fd8ff90dcdb3564a187be520a973fef94574740e8f340258644f</code>\nchecksum, en op <a href=\"https://hub.docker.com/layers/openzaak/open-notificaties/1.1.4/images/sha256-2532abe52a37fd8ff90dcdb3564a187be520a973fef94574740e8f340258644f?context=repo\">Docker Hub</a>\nvinden we dezelfde checksum.</p>\n</li>\n</ul>\n<p>Voor de gebruikers van de <code class=\"language-text\">latest</code> image tag geldt hetzelfde advies als voor Open Zaak.</p>\n<p><strong>CMIS adapter</strong></p>\n<p>We maken wel gebruik van Codecov, maar in plaats van de Github Action gebruiken we de\nglobal Python Uploader van PyPI. Deze uploader was niet kwetsbaar.</p>\n<p><strong>vng-selectielijst</strong></p>\n<p>We maken wel gebruik van Codecov, maar in plaats van de Github Action gebruiken we de\nglobal Python Uploader van PyPI. Deze uploader was niet kwetsbaar.</p>\n<h3>Welke stappen hebben we ondernomen?</h3>\n<p>Op 15 april, kort nadat we geïnformeerd werden door Codecov, hebben we alle access tokens/credentials\ngeroteerd die gebruikt werden in Github Workflows:</p>\n<ul>\n<li>Docker access token voor de <code class=\"language-text\">maykinmediaci</code> account</li>\n<li>PyPI access token voor de <code class=\"language-text\">maykinmedia</code> account</li>\n</ul>\n<p>Tegelijkertijd hebben we de Docker Image checksums gecontroleerd van de Open Zaak releases.</p>\n<p>Op 16 april hebben we de Open Notificaties checksums gecontroleerd, en onderzocht welke andere\nprojecten potentieel risico liepen. We hebben ook een draft gemaakt van dit artikel .</p>\n<p>Op 7 mei en de daaropvolgende dagen hebben we dit artikel gepubliceerd en aangekondigd op de\nverschillende communicatiekanalen om de community te informeren.</p>\n<h3>Vragen</h3>\n<p>Indien je hier vragen over hebt, aarzel niet om contact op te nemen in de Common Ground Slack,\nin het #open-zaak kanaal. Doorgaans zijn er leden van de Technical Steering Group aanwezig.</p>\n<p>Mocht je zelf nog security-incidenten rapporteren, gelieve dan onze gedocumenteerde\n<a href=\"https://open-zaak.readthedocs.io/en/stable/support/security.html#reporting-security-issues\">richtlijnen (EN)</a>\nte volgen.</p>"}},"pageContext":{}},
    "staticQueryHashes": ["1641515924","3169995980","63159454"]}